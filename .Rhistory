library(jsonlite)
user.data <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json"))
library(jsonlite)
user.data <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json"))
library(jsonlite)
user.data <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json"))
library(jsonlite)
user.data.tmp <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json.zip"))
library(jsonlite)
user.data <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json"))
business.data <- readRDS('yelp_data/yelp_academic_dataset_business')
business.data <- readRDS("yelp_data/yelp_academic_dataset_business")
library(tidyverse)
business.data <- readRDS("yelp_data/yelp_academic_dataset_business")
business.data <- readRDS("yelp_data/yelp_academic_dataset_business.rds")
View(business.data)
View(business.data)
View(business.data)
library(jsonlite)
review.data <- readRDS("yelp_data/yelp_academic_dataset_review.rds")
View(review.data)
View(review.data)
user.data <- stream_in(gzfile("yelp_data/yelp_academic_dataset_user.json"))
saveRDS(user.data,file='yelp_data/yelp_academic_dataset_user.rds')
View(user.data)
View(user.data)
library(tidyverse)
business.data <- readRDS("yelp_data/yelp_academic_dataset_business.rds")
review.data <- readRDS("yelp_data/yelp_academic_dataset_review.rds")
user.data <- readRDS("yelp_data/yelp_academic_dataset_user.rds")
View(review.data)
View(review.data)
View(business.data)
View(business.data)
View(user.data)
total(business.data$city)
table(business.data$categories)
table(business.data$city
table(business.data$city)
table(business.data$city)
View(business.data)
View(business.data)
glimpse(business.data)
restaurants.data <- business.data %>%
filter (categories %in% c("Restaurants"))
restaurants.data <- business.data %>%
filter ("Restaurants" %in% categories))
restaurants.data <- business.data %>%
filter ("Restaurants" %in% categories)
restaurants.data <- business.data %>%
filter ('Restaurants' %in% categories)
glimpse(business.data$categories)
restaurants.data <- business.data %>%
filter (categories %in% c("Chinese","Restaurants"))
restaurants.data <- business.data %>%
filter (categories == c("Chinese","Restaurants"))
restaurants.data <- business.data %>%
filter (categories = c("Chinese","Restaurants"))
typeof(business.data$categories)
business.data[1]$categories
business.data[2]$categories
business.data[1]
business.data[1][1]
business.data[2]
business.data[2][1:5]
business.data[1:5]
typeof(business.data$categories)
length(business.data$categories)
typeof(business.data$categories[0]
typeof(business.data$categories[0])
business.data$categories[1:5]
business.data[0,]
business.data[1,]
business.data[1,10]
business.data[1,20]
business.data[1,21]
business.data[1,15]
business.data[1,14]
business.data[1,13]
business.data[1,4]
business.data[1,5]
typeof(business.data[1,5])
typeof(business.data[1,5])[[0]]
typeof(business.data[1,5])[[1]]
business.data[1,5])[[1]]
business.data[1,5][[1]]
business.data[1,5][[2]]
business.data[1,5][[0]]
business.data[1,5][[1]]
business.data[1,5]
typeof(business.data[1,5])
length(business.data[1,5])
True.false <- business.data[1,5] == c("Fast Food", "Restaurants")
True.false
True.false <- (business.data[1,5] == c("Fast Food", "Restaurants"))
True.false
True.false <- (business.data[1,5] == "Fast Food"  "Restaurants"
True.false
category <- c("Fast Food", "Restaurants")
category
True.false <- (business.data[1,5] == category
True.false <- (business.data[1,5] == category
True.false
True.false <- (business.data[1,5] %in% category
True.false
business.data[1,5] %in% category
business.data[1,5] = category
category <- list ("Fast Food", "Restaurants")
category
business.data[1,5] == category
business.data[1,5] %in% category
typeof(category)
typeof(category)
length(category)
typeof(business.data[1,5])
length(business.data[1,5])
category
category <- list ("Fast Food"  "Restaurants")
category
typeof(business.data[1,5])
length(business.data[1,5])
business.data[1,5]
category <- list ("Fast Food  Restaurants")
category
category <- list (""Fast Food"  "Restaurants"")
category
category.tmp <- c("Fast Food","Restaurants")
category <- list(category.tmp)
typeof(category)
length(category)
category
business.data[1,5] %in% category
business.category <- list(c("Chinese","Restaurants"))
business.category
typeof(business.category)
length(business.category)
restaurants.data <- business.data %>%
filter (categories %in% business.category)
restaurants.data <- business.data %>%
filter (buisness.data$categories %in% business.category)
restaurants.data <- business.data %>%
group_by(categories)
good.review <- review.data %>%
filter (stars %in% good.review)
restaurants.data <- business.data %>%
filter (categories %in% business.category)
glimpse(business.data)
restaurants.data <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, attributes, type) %>%
filter (categories %in% business.category)
restaurants.data <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% business.category)
chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% Chinese.restaurants)
chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% chinese.restaurants)
Chinese.restaurants <- list(c("Chinese","Restaurants"))
chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% chinese.restaurants)
business.category <- list(c("Chinese","Restaurants"))
chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% business.category)
View(chinese.restaurants)
View(chinese.restaurants)
library(readxl)
Chinese.restaurants %>%
ggplot(x=city) + geom_histogram()
table(chinese.restaurants$city)
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n())
chinese.restaurants %>%
group_by(city) %>%
summarise(city,number.restaurants = n())
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants))
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:10) %>%
ggplot(aes(x=city),y=number.restaurants) + geom_line()
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:10) %>%
ggplot(aes(x=city),y=number.restaurants)) + geom_line()
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:10) %>%
ggplot(aes(x=city),y=number.restaurants)) + geom_line() +
ggtitle("Number of Chinese Restaurants in top cities")+xlab('City')
chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:10) %>%
ggplot(aes(x=city ,y=number.restaurants)) + geom_line() +
ggtitle("Number of Chinese Restaurants in top cities")+xlab('City')
hot.city <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:5) %>%
hot.city <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:5)
hot.city <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:5)
hot.city
hot.city.data <- chinese.restaurants %>%
left_join(hot.city, by=c("chinese.restaurants$city" = "hot.city$city"))
hot.city.data <- chinese.restaurants %>%
left_join(hot.city, by=c(chinese.restaurants$city = hot.city$city))
hot.city.data <- chinese.restaurants %>%
left_join(hot.city, by=c("chinese.restaurants$city" = hot.city$city))
hot.city.data <- chinese.restaurants %>%
left_join(hot.city)
View(hot.city.data)
View(hot.city.data)
hot.city.data <- hot.city %>%
left_join(chinese.restaurants)
View(hot.city.data)
View(hot.city.data)
View(chinese.restaurants)
View(hot.city.data)
hot.city.data <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:5) %>%
select(city) %>%
left_join(chinese.restaurants)
View(hot.city.data)
View(hot.city.data)
hot.city.data <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:3) %>%
select(city) %>%
left_join(chinese.restaurants)
View(hot.city.data)
View(hot.city.data)
hot.city.data <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(chinese.restaurants)
View(hot.city.data)
# Only focus on Las Vegas
hot.city.business <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(chinese.restaurants)
# Only focus on Las Vegas
hot.city.business <- chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(chinese.restaurants)
View(hot.city.business)
bsiness.data.chinese_restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% business.category)
bsiness.chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% business.category)
business.chinese.restaurants <- business.data %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type) %>%
filter (categories %in% business.category)
# Only focus on Las Vegas
bsiness.chinese.restaurants.las_vegas <- business.chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(chinese.restaurants)
# Only focus on Las Vegas
business.chinese.restaurants.las_vegas <- business.chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(business.chinese.restaurants)
View(bsiness.chinese.restaurants)
View(business.chinese.restaurants.las_vegas)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id) %>%
left_join(review.data)
View(review.chinese.restaurants.las_vegas)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id) %>%
left_join(review.data)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id, city) %>%
left_join(review.data)
View(review.chinese.restaurants.las_vegas)
View(review.chinese.restaurants.las_vegas)
View(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
select (user_id) %>%
right_join (user.data)
user.chinese.restaurants.las_vegas <- user.data %>%
inner_join(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- user.data %>%
left_join(review.chinese.restaurants.las_vegas)
glimpse(user.data)
user.chinese.restaurants.las_vegas <- user.data %>%
select(yelping_since, review_count,name,user_id,friends,fans,average_stars,type,compliments,elite) %
left_join(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- user.data %>%
select(yelping_since, review_count,name,user_id,friends,fans,average_stars,type,compliments,elite) %>%
left_join(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- user.data %>%
select(yelping_since, review_count,name,user_id,friends,fans,average_stars,type,elite) %>%
left_join(review.chinese.restaurants.las_vegas)
business.data.raw <- readRDS("yelp_data/yelp_academic_dataset_business.rds")
review.data.raw <- readRDS("yelp_data/yelp_academic_dataset_review.rds")
user.data.raw <- readRDS("yelp_data/yelp_academic_dataset_user.rds")
View(hot.city.data)
# Make all table usable for query, join
business.data <- business.data.raw %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type)
user.data <- user.data.raw %>%
select(yelping_since, review_count,name,user_id,friends,fans,average_stars,type,elite)
# Focus on Chinese restaurants
business.category <- list(c("Chinese","Restaurants"))
business.chinese.restaurants <- business.data %>%
filter (categories %in% business.category)
# Only focus on Las Vegas
business.chinese.restaurants.las_vegas <- business.chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(business.chinese.restaurants)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id, city) %>%
left_join(review.data)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
select(user_id) %>%
right_join(user.data)
View(user.chinese.restaurants.las_vegas)
View(review.chinese.restaurants.las_vegas)
View(business.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
select(user_id) %>%
left_join(user.data)
View(user.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
select(user_id) %>%
right_join(user.data)
user.chinese.restaurants.las_vegas <- user.data %>%
inner_join(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- user.data %>%
inner_join(review.chinese.restaurants.las_vegas, by=c(user_id = user_id))
# Make all table usable for query, join
business.data <- business.data.raw %>%
select(business_id, full_address,open, categories,city, review_count, name, longitude, state, stars, latitude, type)
user.data <- user.data.raw %>%
select(yelping_since, review_count,name,user_id,friends,fans,average_stars,type,elite)
review.data <- review.data.raw
# Focus on Chinese restaurants
business.category <- list(c("Chinese","Restaurants"))
business.chinese.restaurants <- business.data %>%
filter (categories %in% business.category)
# Only focus on Las Vegas
business.chinese.restaurants.las_vegas <- business.chinese.restaurants %>%
group_by(city) %>%
summarise(number.restaurants = n()) %>%
arrange(desc(number.restaurants)) %>%
slice(1:1) %>%
select(city) %>%
left_join(business.chinese.restaurants)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id, city) %>%
left_join(review.data)
View(review.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
group_by(user_id) %>%
select (user_id) %>%
left_join(user.data)
View(user.chinese.restaurants.las_vegas)
review.chinese.restaurants.las_vegas <- business.chinese.restaurants.las_vegas %>%
select (business_id, city) %>%
summarise(number.reviews = n()) %>%
left_join(review.data)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
group_by(user_id) %>%
summarise(number.restaurants = n())
View(user.chinese.restaurants.las_vegas)
View(user.chinese.restaurants.las_vegas)
user.chinese.restaurants.las_vegas <- review.chinese.restaurants.las_vegas %>%
group_by(user_id) %>%
summarise(number.restaurants = n()) %>%
select (user_id) %>%
left_join(user.data)
View(user.chinese.restaurants.las_vegas)
View(user.chinese.restaurants.las_vegas)
saveRDS(business.chinese.restaurants.las_vegas,file='yelp_data/business_LasVegas_Chinese_Restaurants.rds')
saveRDS(review.chinese.restaurants.las_vegas,file='yelp_data/review_LasVegas_Chinese_Restaurants.rds')
saveRDS(business.chinese.restaurants.las_vegas,file='yelp_data/business_LasVegas_Chinese_Restaurants.rds')
saveRDS(review.chinese.restaurants.las_vegas,file='yelp_data/review_LasVegas_Chinese_Restaurants.rds')
saveRDS(user.chinese.restaurants.las_vegas,file='yelp_data/user_LasVegas_Chinese_Restaurants.rds')
business.data <- readRDS("yelp_data/business_LasVegas_Chinese_Restaurants.rds")
review.data <- readRDS("yelp_data/review_LasVegas_Chinese_Restaurants.rds")
user.data <- readRDS("yelp_data/user_LasVegas_Chinese_Restaurants.rds")
View(business.data)
View(business.data)
View(review.data)
View(review.data)
